
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Common Analysis Gotchas Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="review.html" />
    
    
    <link rel="prev" href="../tools/stmo.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Firefox Data Documentation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="terminology.html">
            
                <a href="terminology.html">
            
                    
                    Terminology
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting_started.html">
            
                <a href="getting_started.html">
            
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="analysis_intro.html">
            
                <a href="analysis_intro.html">
            
                    
                    Analysis Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="data_privacy.html">
            
                <a href="data_privacy.html">
            
                    
                    Data Privacy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="choosing_a_dataset.html">
            
                <a href="choosing_a_dataset.html">
            
                    
                    Choosing a Dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../tools/stmo.html">
            
                <a href="../tools/stmo.html">
            
                    
                    Intro to STMO / Re:dash
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.5" data-path="analysis_gotchas.html">
            
                <a href="analysis_gotchas.html">
            
                    
                    Common Analysis Gotchas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="review.html">
            
                <a href="review.html">
            
                    
                    Getting Review
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../datasets/">
            
                <a href="../datasets/">
            
                    
                    Data Collection and Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Understanding our Data
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="choosing_a_dataset.html">
            
                <a href="choosing_a_dataset.html">
            
                    
                    Choosing a dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.1.2" data-path="analysis_gotchas.html">
            
                <a href="analysis_gotchas.html">
            
                    
                    Common Analysis Gotchas
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../datasets/new_data.html">
            
                <a href="../datasets/new_data.html">
            
                    
                    Collecting New Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../datasets/reference.html">
            
                <a href="../datasets/reference.html">
            
                    
                    Dataset Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../datasets/pings.html">
            
                <a href="../datasets/pings.html">
            
                    
                    Pings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../datasets/derived.html">
            
                <a href="../datasets/derived.html">
            
                    
                    Derived Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.2.1" data-path="../datasets/batch_view/longitudinal/reference.html">
            
                <a href="../datasets/batch_view/longitudinal/reference.html">
            
                    
                    Longitudinal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.2" data-path="../datasets/batch_view/cross_sectional/reference.html">
            
                <a href="../datasets/batch_view/cross_sectional/reference.html">
            
                    
                    Cross Sectional
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.3" data-path="../datasets/batch_view/main_summary/reference.html">
            
                <a href="../datasets/batch_view/main_summary/reference.html">
            
                    
                    Main Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.4" data-path="../datasets/batch_view/crash_summary/reference.html">
            
                <a href="../datasets/batch_view/crash_summary/reference.html">
            
                    
                    Crash Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.5" data-path="../datasets/batch_view/crash_aggregates/reference.html">
            
                <a href="../datasets/batch_view/crash_aggregates/reference.html">
            
                    
                    Crash Aggregate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.6" data-path="../datasets/batch_view/events/reference.html">
            
                <a href="../datasets/batch_view/events/reference.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.7" data-path="../datasets/batch_view/sync_summary/reference.html">
            
                <a href="../datasets/batch_view/sync_summary/reference.html">
            
                    
                    Sync Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.8" data-path="../datasets/batch_view/addons/reference.html">
            
                <a href="../datasets/batch_view/addons/reference.html">
            
                    
                    Addons
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.9" data-path="../datasets/batch_view/client_count/reference.html">
            
                <a href="../datasets/batch_view/client_count/reference.html">
            
                    
                    Client Count
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../tools/experiments.html">
            
                <a href="../tools/experiments.html">
            
                    
                    Experimental Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.3.1" data-path="../datasets/shield.html">
            
                <a href="../datasets/shield.html">
            
                    
                    Accessing Shield Study data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../tools/">
            
                <a href="../tools/">
            
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="data_pipeline.html">
            
                <a href="data_pipeline.html">
            
                    
                    Overview of Mozilla's Data Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../tools/interfaces.html">
            
                <a href="../tools/interfaces.html">
            
                    
                    Interfaces
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="analysis_intro.html">
            
                <a href="analysis_intro.html">
            
                    
                    TMO & STMO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../tools/spark.html">
            
                <a href="../tools/spark.html">
            
                    
                    Custom analysis with Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../cookbooks/realtime_analysis_plugin.html">
            
                <a href="../cookbooks/realtime_analysis_plugin.html">
            
                    
                    Creating a Real-time Analysis Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../tools/distribution_viewer.html">
            
                <a href="../tools/distribution_viewer.html">
            
                    
                    Distribution Viewer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../tools/hbase.html">
            
                <a href="../tools/hbase.html">
            
                    
                    HBase
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../tools/rtmo.html">
            
                <a href="../tools/rtmo.html">
            
                    
                    RTMO
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../cookbooks/">
            
                <a href="../cookbooks/">
            
                    
                    Cookbooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../cookbooks/parquet.html">
            
                <a href="../cookbooks/parquet.html">
            
                    
                    Working with Parquet Data on ATMO Clusters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../cookbooks/create_a_dataset.html">
            
                <a href="../cookbooks/create_a_dataset.html">
            
                    
                    Creating a custom re:dash dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../cookbooks/realtime_analysis_plugin.html">
            
                <a href="../cookbooks/realtime_analysis_plugin.html">
            
                    
                    Creating a Real-time Analysis Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../cookbooks/longitudinal_examples.html">
            
                <a href="../cookbooks/longitudinal_examples.html">
            
                    
                    Longitudinal Examples
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    About this Documentation
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" >
            
                <a target="_blank" href="https://bugzilla.mozilla.org/enter_bug.cgi?assigned_to=nobody%40mozilla.org&bug_file_loc=http%3A%2F%2F&bug_ignored=0&bug_severity=normal&bug_status=NEW&cf_fx_iteration=---&cf_fx_points=---&component=Documentation%20and%20Knowledge%20Repo%20%28RTMO%29&contenttypemethod=autodetect&contenttypeselection=text%2Fplain&defined_groups=1&flag_type-4=X&flag_type-607=X&flag_type-800=X&flag_type-803=X&flag_type-916=X&form_name=enter_bug&maketemplate=Remember%20values%20as%20bookmarkable%20template&op_sys=Linux&priority=P3&product=Data%20Platform%20and%20Tools&rep_platform=x86_64&target_milestone=---&version=unspecified">
            
                    
                    Bug Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../meta/structure.html">
            
                <a href="../meta/structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../meta/contributing.html">
            
                <a href="../meta/contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Common Analysis Gotchas</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="analysis-gotchas">Analysis Gotchas</h1>
<p>When performing analysis on any data there are some mistakes that are easy to make and details that are easy to overlook. Do you know exactly what question you hope to answer? Is your sample representative of your population? Is your result &quot;real&quot;? How precisely can you state your conclusion?</p>
<p>This document is not about those traps. Instead, it is about quirks and pitfalls specific to <a href="http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/index.html" target="_blank">Telemetry</a>.</p>
<h3 id="pseudo-replication">Pseudo-replication</h3>
<p>Telemetry data is a collection of pings. A single main-ping represents a single subsession. Some clients have more subsessions than others.</p>
<p>So when you say <a href="https://mzl.la/2q75dbF" target="_blank">&quot;63% of beta 53 has Firefox set as its default browser&quot;</a>, make sure you specify it is 63% of <em>pings</em>, since it is only around 46% of clients. (Apparently users with Firefox Beta 53 set as their default browser submit more main-pings than users who don&apos;t).</p>
<h3 id="profiles-vs-users">Profiles vs Users</h3>
<p>In the section above you&apos;ll notice I said &quot;clients&quot; not &quot;users.&quot; That is because of all the things we&apos;re able to count, users isn&apos;t one of them.</p>
<p>Users can have multiple Firefox profiles running on the same computer at the same time (like developers).</p>
<p>Users can have the same Firefox profile running on several computers on different days of the week (also developers).</p>
<p>The only things we can count are pings and clients. Clients we can count because we send a <code>client_id</code> with each ping that uniquely identifies the profile from which it came. This is generally close enough to our idea of &quot;user&quot; that we can get away with counting profiles and calling them users, but you may run into some instances where the distinction matters.</p>
<p>When in doubt, be precise. You&apos;re counting <em>clients</em>.</p>
<h3 id="opt-in-vs-opt-out">Opt-in vs Opt-out</h3>
<p>We don&apos;t collect the same information from everyone.</p>
<p>Every profile that doesn&apos;t have Telemetry disabled sends us &quot;opt-out&quot; Telemetry. This includes:</p>
<ul>
<li>Nearly everything in the <a href="http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/data/environment.html" target="_blank">Environment</a></li>
<li>Some very specific <a href="http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/histograms.html" target="_blank">Histograms</a>, <a href="http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/scalars.html" target="_blank">Scalars</a>, and <a href="http://gecko.readthedocs.io/en/latest/toolkit/components/telemetry/telemetry/collection/events.html" target="_blank">Events</a> that are marked <code>&quot;releaseChannelCollection&quot;: &quot;opt-out&quot;</code></li>
</ul>
<p>Most probes are &quot;opt-in&quot;: we do not get information from them unless the user opts into sending us this information. Users can opt-in in two ways:</p>
<ol>
<li>Using Firefox&apos;s Options UI to tick the box that gives us permission</li>
<li>Installing any pre-release version of Firefox</li>
</ol>
<p>The nature of selection bias is such that the population in #1 is useless for analysis. If you want to encourage users to collect good information for us, ask them to install Beta: it&apos;s only slightly harder than finding and checking the opt-in checkbox in Firefox.</p>
<h3 id="trusting-dates">Trusting Dates</h3>
<p>Don&apos;t trust client times.</p>
<p>Any timestamp recorded by the user is subject to &quot;clock skew.&quot; The user&apos;s clock can be set (purposefully or accidentally) to any time at all. The nature of SSL certificates tends to keep this within a certain relatively-accurate window, because a user who&apos;s clock is too far in the past or too far in the future might confuse certain expiration-date-checking code.</p>
<p>Examples of client times: <code>crashDate</code>, <code>crashTime</code>, <code>meta/Date</code>, <code>sessionStartDate</code>, <code>subsessionStartDate</code>, <code>profile/creationDate</code></p>
<p>Examples of server times you can trust: <code>Timestamp</code></p>
<h3 id="date-formats">Date Formats</h3>
<p>Not all dates and times are created equal. Most of the dates and times in Telemetry pings are <a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank">ISO 8601</a>. Most are full timestamps, though their resolution may differ from being per-second to being per-day.</p>
<p>Then there&apos;s <code>profile/creationDate</code> which is just a number of days since epoch. Like <code>17177</code> for the date 2017-01-11.</p>
<p><strong>Tip:</strong> To convert <code>profile/creationDate</code> to a usable date in SQL: <code>DATE_ADD(&apos;day&apos;, profile_created, DATE &apos;1970-01-01&apos;)</code></p>
<p>In derived datasets ISO dates are sometimes converted to strings in one of two formats: <code>%Y-%m-%d</code> or <code>%Y%m%d</code>.</p>
<p>Build ids look like dates but aren&apos;t. If you take the first eight characters you can use that as a proxy for the day the build was released.</p>
<h3 id="delays">Delays</h3>
<p>Telemetry data takes a while to get into our hands. The largest data mule in Telemetry is the main-ping. It is (pending <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1336360" target="_blank">bug 1336360</a>) sent at the beginning of a client&apos;s <em>next</em> Firefox session. If the user shuts down their Firefox for the weekend, we won&apos;t get their Friday data until Monday morning.</p>
<p>A rule of thumb (pending <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1336360" target="_blank">bug 1336360</a>) is data from two days ago is usually fairly representative.</p>
<p>If you&apos;d like to read more about this subject and look at pretty graphs, there are a series of blogposts <a href="https://chuttenblog.wordpress.com/2017/02/09/data-science-is-hard-client-delays-for-crash-pings/" target="_blank">here</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../tools/stmo.html" class="navigation navigation-prev " aria-label="Previous page: Intro to STMO / Re:dash">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="review.html" class="navigation navigation-next " aria-label="Next page: Getting Review">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Common Analysis Gotchas","level":"1.2.5","depth":2,"next":{"title":"Getting Review","level":"1.2.6","depth":2,"path":"concepts/review.md","ref":"concepts/review.md","articles":[]},"previous":{"title":"Intro to STMO / Re:dash","level":"1.2.4","depth":2,"path":"tools/stmo.md","ref":"tools/stmo.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["toc"],"pluginsConfig":{"toc":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"introduction.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"concepts/analysis_gotchas.md","mtime":"2017-05-11T18:59:45.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-06-16T15:55:32.766Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

