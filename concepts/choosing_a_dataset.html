
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Choosing a Dataset Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../tools/stmo.html" />
    
    
    <link rel="prev" href="data_privacy.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Firefox Data Documentation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="terminology.html">
            
                <a href="terminology.html">
            
                    
                    Terminology
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="getting_started.html">
            
                <a href="getting_started.html">
            
                    
                    Getting Started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="analysis_intro.html">
            
                <a href="analysis_intro.html">
            
                    
                    Analysis Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="data_privacy.html">
            
                <a href="data_privacy.html">
            
                    
                    Data Privacy
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.3" data-path="choosing_a_dataset.html">
            
                <a href="choosing_a_dataset.html">
            
                    
                    Choosing a Dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../tools/stmo.html">
            
                <a href="../tools/stmo.html">
            
                    
                    Intro to STMO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="analysis_gotchas.html">
            
                <a href="analysis_gotchas.html">
            
                    
                    Common Analysis Gotchas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="review.html">
            
                <a href="review.html">
            
                    
                    Getting Review
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../datasets/">
            
                <a href="../datasets/">
            
                    
                    Data Collection and Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" >
            
                <span>
            
                    
                    Understanding our Data
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.3.1.1" data-path="choosing_a_dataset.html">
            
                <a href="choosing_a_dataset.html">
            
                    
                    Choosing a dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="analysis_gotchas.html">
            
                <a href="analysis_gotchas.html">
            
                    
                    Common Analysis Gotchas
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../datasets/new_data.html">
            
                <a href="../datasets/new_data.html">
            
                    
                    Collecting New Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../datasets/reference.html">
            
                <a href="../datasets/reference.html">
            
                    
                    Dataset Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../datasets/pings.html">
            
                <a href="../datasets/pings.html">
            
                    
                    Pings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../datasets/derived.html">
            
                <a href="../datasets/derived.html">
            
                    
                    Derived Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.2.1" data-path="../datasets/batch_view/longitudinal/reference.html">
            
                <a href="../datasets/batch_view/longitudinal/reference.html">
            
                    
                    Longitudinal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.2" data-path="../datasets/batch_view/cross_sectional/reference.html">
            
                <a href="../datasets/batch_view/cross_sectional/reference.html">
            
                    
                    Cross Sectional
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.3" data-path="../datasets/batch_view/main_summary/reference.html">
            
                <a href="../datasets/batch_view/main_summary/reference.html">
            
                    
                    Main Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.4" data-path="../datasets/batch_view/crash_summary/reference.html">
            
                <a href="../datasets/batch_view/crash_summary/reference.html">
            
                    
                    Crash Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.5" data-path="../datasets/batch_view/crash_aggregates/reference.html">
            
                <a href="../datasets/batch_view/crash_aggregates/reference.html">
            
                    
                    Crash Aggregate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.6" data-path="../datasets/batch_view/events/reference.html">
            
                <a href="../datasets/batch_view/events/reference.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.7" data-path="../datasets/batch_view/sync_summary/reference.html">
            
                <a href="../datasets/batch_view/sync_summary/reference.html">
            
                    
                    Sync Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.8" data-path="../datasets/batch_view/addons/reference.html">
            
                <a href="../datasets/batch_view/addons/reference.html">
            
                    
                    Addons
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.9" data-path="../datasets/batch_view/client_count/reference.html">
            
                <a href="../datasets/batch_view/client_count/reference.html">
            
                    
                    Client Count
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.10" data-path="../datasets/mozetl/churn/reference.html">
            
                <a href="../datasets/mozetl/churn/reference.html">
            
                    
                    Churn
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.11" data-path="../datasets/batch_view/retention/reference.html">
            
                <a href="../datasets/batch_view/retention/reference.html">
            
                    
                    Retention
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.12" data-path="../datasets/mozetl/clients_daily/reference.html">
            
                <a href="../datasets/mozetl/clients_daily/reference.html">
            
                    
                    Clients Daily
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.13" data-path="../datasets/batch_view/new_profile/reference.html">
            
                <a href="../datasets/batch_view/new_profile/reference.html">
            
                    
                    New Profile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.14" data-path="../datasets/batch_view/update/reference.html">
            
                <a href="../datasets/batch_view/update/reference.html">
            
                    
                    Update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.15" data-path="../datasets/batch_view/heavy_users/reference.html">
            
                <a href="../datasets/batch_view/heavy_users/reference.html">
            
                    
                    Heavy Users
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2.16" data-path="../datasets/other/ssl/reference.html">
            
                <a href="../datasets/other/ssl/reference.html">
            
                    
                    SSL Ratios (public)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3.3" data-path="../tools/experiments.html">
            
                <a href="../tools/experiments.html">
            
                    
                    Experimental Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.3.1" data-path="../datasets/shield.html">
            
                <a href="../datasets/shield.html">
            
                    
                    Accessing Shield Study data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3.4" data-path="../datasets/search.html">
            
                <a href="../datasets/search.html">
            
                    
                    Search Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.4.1" data-path="../datasets/mozetl/search_aggregates/reference.html">
            
                <a href="../datasets/mozetl/search_aggregates/reference.html">
            
                    
                    Search Aggregates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.4.2" data-path="../datasets/mozetl/search_clients_daily/reference.html">
            
                <a href="../datasets/mozetl/search_clients_daily/reference.html">
            
                    
                    Search Clients Daily
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../tools/">
            
                <a href="../tools/">
            
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="data_pipeline.html">
            
                <a href="data_pipeline.html">
            
                    
                    Overview of Mozilla's Data Pipeline
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../tools/interfaces.html">
            
                <a href="../tools/interfaces.html">
            
                    
                    Interfaces
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="analysis_intro.html">
            
                <a href="analysis_intro.html">
            
                    
                    Analysis Intro / TMO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../tools/spark.html">
            
                <a href="../tools/spark.html">
            
                    
                    Custom analysis with Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.3" data-path="../cookbooks/realtime_analysis_plugin.html">
            
                <a href="../cookbooks/realtime_analysis_plugin.html">
            
                    
                    Creating a Real-time Analysis Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.4" data-path="../tools/distribution_viewer.html">
            
                <a href="../tools/distribution_viewer.html">
            
                    
                    Distribution Viewer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.5" data-path="../tools/rtmo.html">
            
                <a href="../tools/rtmo.html">
            
                    
                    RTMO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.6" data-path="../tools/alerts.html">
            
                <a href="../tools/alerts.html">
            
                    
                    Alerts
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../tools/projects.html">
            
                <a href="../tools/projects.html">
            
                    
                    Project Glossary
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../cookbooks/">
            
                <a href="../cookbooks/">
            
                    
                    Cookbooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../cookbooks/parquet.html">
            
                <a href="../cookbooks/parquet.html">
            
                    
                    Working with Parquet Data on ATMO Clusters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../cookbooks/create_a_dataset.html">
            
                <a href="../cookbooks/create_a_dataset.html">
            
                    
                    Creating a custom re:dash dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../cookbooks/realtime_analysis_plugin.html">
            
                <a href="../cookbooks/realtime_analysis_plugin.html">
            
                    
                    Creating a Real-time Analysis Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../cookbooks/longitudinal_examples.html">
            
                <a href="../cookbooks/longitudinal_examples.html">
            
                    
                    Longitudinal Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../cookbooks/hll_zeppelin.html">
            
                <a href="../cookbooks/hll_zeppelin.html">
            
                    
                    Using HyperLogLog in Zeppelin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../cookbooks/new_ping.html">
            
                <a href="../cookbooks/new_ping.html">
            
                    
                    Sending a Custom Ping
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    About this Documentation
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../meta/contributing.html">
            
                <a href="../meta/contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" >
            
                <a target="_blank" href="https://bugzilla.mozilla.org/enter_bug.cgi?assigned_to=nobody%40mozilla.org&bug_file_loc=http%3A%2F%2F&bug_ignored=0&bug_severity=normal&bug_status=NEW&cf_fx_iteration=---&cf_fx_points=---&component=Documentation%20and%20Knowledge%20Repo%20%28RTMO%29&contenttypemethod=autodetect&contenttypeselection=text%2Fplain&defined_groups=1&flag_type-4=X&flag_type-607=X&flag_type-800=X&flag_type-803=X&flag_type-916=X&form_name=enter_bug&maketemplate=Remember%20values%20as%20bookmarkable%20template&op_sys=Linux&priority=--&product=Data%20Platform%20and%20Tools&rep_platform=x86_64&target_milestone=---&version=unspecified">
            
                    
                    Bug Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../meta/structure.html">
            
                <a href="../meta/structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Choosing a Dataset</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="choosing-a-dataset"><a name="choosing-a-dataset" class="plugin-anchor" href="#choosing-a-dataset"><i class="fa fa-link" aria-hidden="true"></i></a>Choosing a Dataset</h1>
<p>This document will help you find the best data source for a given analysis.</p>
<p>This guide focuses on descriptive datasets and does not cover experimentation.
For example, this guide will help if you need to answer questions like:</p>
<ul>
<li>How many users do we have in Germany, how many crashes we see per day?</li>
<li>How many users have a given addon installed?</li>
</ul>
<p>If you&apos;re interested in figuring out whether there&apos;s a causal link between two events
take a look at our <a href="../tools/experiments.html">tools for experimentation</a>.</p>
<h2 id="table-of-contents"><a name="table-of-contents" class="plugin-anchor" href="#table-of-contents"><i class="fa fa-link" aria-hidden="true"></i></a>Table of Contents</h2>
<!-- toc -->
<ul>
<li><a href="#raw-pings">Raw Pings</a></li>
<li><a href="#main-ping-derived-datasets">Main Ping Derived Datasets</a><ul>
<li><a href="#longitudinal">longitudinal</a></li>
<li><a href="#main_summary">main_summary</a></li>
<li><a href="#cross_sectional">cross_sectional</a></li>
<li><a href="#client_count">client_count</a></li>
<li><a href="#heavy_users">heavy_users</a></li>
<li><a href="#churn">churn</a></li>
<li><a href="#retention">retention</a></li>
<li><a href="#clients_daily">clients_daily</a></li>
</ul>
</li>
<li><a href="#crash-ping-derived-datasets">Crash Ping Derived Datasets</a><ul>
<li><a href="#crash_aggregates">crash_aggregates</a></li>
<li><a href="#crash_summary">crash_summary</a></li>
</ul>
</li>
<li><a href="#new-profile-derived-datasets">New-Profile Derived Datasets</a></li>
<li><a href="#update-derived-dataset">Update Derived Dataset</a></li>
<li><a href="#appendix">Appendix</a><ul>
<li><a href="#mobile-metrics">Mobile Metrics</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->
<h1 id="raw-pings"><a name="raw-pings" class="plugin-anchor" href="#raw-pings"><i class="fa fa-link" aria-hidden="true"></i></a>Raw Pings</h1>
<p>We receive data from our users via <strong>pings</strong>.
There are several types of pings,
each containing different measurements and sent for different purposes.
To review a complete list of ping types and their schemata, see
<a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/index.html" target="_blank">this section of the Mozilla Source Tree Docs</a>.</p>
<p>Many pings are also described by a JSONSchema specification which can be found in <a href="https://github.com/mozilla-services/mozilla-pipeline-schemas/tree/master/schemas/telemetry" target="_blank">this repository</a>.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<p>The large majority of analyses can be completed using only the
<a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/main-ping.html" target="_blank">main ping</a>.
This ping includes histograms, scalars, events, and other performance and diagnostic data.</p>
<p>Few analyses actually rely directly on the raw ping data.
Instead, we provide <strong>derived datasets</strong> which are processed versions of these data,
made to be:</p>
<ul>
<li>Easier and faster to query</li>
<li>Organized to make the data easier to analyze</li>
<li>Cleaned of erroneous or misleading data</li>
</ul>
<p>Before analyzing raw ping data,
<strong>check to make sure there isn&apos;t already a derived dataset</strong> made for your purpose.
If you do need to work with raw ping data, be aware that loading the data can take a while.
Try to limit the size of your data by controlling the date range, etc.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>You can access raw ping data from an <a href="https://analysis.telemetry.mozilla.org/" target="_blank">ATMO cluster</a> using the <a href="https://python-moztelemetry.readthedocs.io/en/stable/api.html#module-moztelemetry.dataset" target="_blank">Dataset API</a>.
Raw ping data are not available in <a href="sql.telemetry.mozilla.org">re:dash</a>.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>You can find <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/index.html" target="_blank">the complete ping documentation</a>.
To augment our data collection, see <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Performance/Adding_a_new_Telemetry_probe" target="_blank">Collecting New Data</a> and the
<a href="https://wiki.mozilla.org/Firefox/Data_Collection" target="_blank">Data Collection Policy</a>.</p>
<h1 id="main-ping-derived-datasets"><a name="main-ping-derived-datasets" class="plugin-anchor" href="#main-ping-derived-datasets"><i class="fa fa-link" aria-hidden="true"></i></a>Main Ping Derived Datasets</h1>
<p>The <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/main-ping.html" target="_blank">main ping</a>
contains most of the measurements used to track performance and health of Firefox in the wild.
This ping includes histograms, scalars, and events.</p>
<p>This section describes the derived datasets we provide to make analyzing this data easier.</p>
<h2 id="longitudinal"><a name="longitudinal" class="plugin-anchor" href="#longitudinal"><i class="fa fa-link" aria-hidden="true"></i></a>longitudinal</h2>
<p>The <code>longitudinal</code> dataset is a 1% sample of main ping data
organized so that each row corresponds to a client_id.
If you&apos;re not sure which dataset to use for your analysis,
this is probably what you want.</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>Each row in the <code>longitudinal</code> dataset represents one <code>client_id</code>,
which is approximately a user.
Each column represents a field from the main ping.
Most fields contain <strong>arrays of values</strong>, with one value for each ping associated with a client_id.
Using arrays give you access to the raw data from each ping,
but can be difficult to work with from SQL.
Here&apos;s a <a href="https://sql.telemetry.mozilla.org/queries/4188#table" target="_blank">query showing some sample data</a>
to help illustrate.
Take a look at the <a href="../cookbooks/longitudinal.md">longitudinal examples</a> if you get stuck.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<p>Think of the longitudinal table as wide and short.
The dataset contains more columns than <code>main_summary</code>
and down-samples to 1% of all clients to reduce query computation time and save resources.</p>
<p>In summary, the longitudinal table differs from <code>main_summary</code> in two important ways:</p>
<ul>
<li>The longitudinal dataset groups all data so that one row represents a client_id</li>
<li>The longitudinal dataset samples to 1% of all client_ids</li>
</ul>
<p>Please note that this dataset only contains release (or opt-out) histograms and scalars.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The <code>longitudinal</code> is available in re:dash,
though it can be difficult to work with the array values in SQL.
Take a look at this <a href="https://sql.telemetry.mozilla.org/queries/4189/source" target="_blank">example query</a>.</p>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data
in <a href="http://spark.apache.org/docs/latest/quick-start.html" target="_blank">Spark</a>.</p>
<pre><code>s3://telemetry-parquet/longitudinal/
</code></pre><h2 id="mainsummary"><a name="mainsummary" class="plugin-anchor" href="#mainsummary"><i class="fa fa-link" aria-hidden="true"></i></a>main_summary</h2>
<p>The <code>main_summary</code> table is the most direct representation of a main ping
but can be difficult to work with due to its size. 
Prefer the <code>longitudinal</code> dataset unless using the sampled data is prohibitive.</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>The <code>main_summary</code> table contains one row for each ping.
Each column represents one field from the main ping payload,
though only a subset of all main ping fields are included.
This dataset <strong>does not include histograms</strong>.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<p>This table is massive, and due to it&apos;s size, it can be difficult to work with.
You should <strong>avoid querying <code>main_summary</code></strong> from <a href="https://sql.telemetry.mozilla.org" target="_blank">re:dash</a>.
Your queries will be <strong>slow to complete</strong> and can <strong>impact performance for other users</strong>,
since re:dash on a shared cluster.</p>
<p>Instead, we recommend using the <code>longitudinal</code> or <code>cross_sectional</code> dataset where possible.
If these datasets do not suffice, consider using Spark on an
<a href="https://analysis.telemetry.mozilla.org" target="_blank">ATMO</a> cluster.
In the odd case where these queries are necessary,
make use of the <code>sample_id</code> field and limit to a short submission date range.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data in Spark.</p>
<pre><code>s3://telemetry-parquet/main_summary/v4/
</code></pre><p>Though <strong>not recommended</strong> <code>main_summary</code> is accessible through re:dash. 
Here&apos;s an <a href="https://sql.telemetry.mozilla.org/queries/4201/source" target="_blank">example query</a>.
Your queries will be slow to complete and can <strong>impact performance for other users</strong>,
since re:dash is on a shared cluster.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>The technical documentation for <code>main_summary</code> is located in the
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/docs/MainSummary.md" target="_blank">telemetry-batch-view documentation</a>.</p>
<p>The code responsible for generating this dataset is 
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/MainSummaryView.scala" target="_blank">here</a></p>
<h2 id="crosssectional"><a name="crosssectional" class="plugin-anchor" href="#crosssectional"><i class="fa fa-link" aria-hidden="true"></i></a>cross_sectional</h2>
<p>The <code>cross_sectional</code> dataset provides descriptive statistics
for each client_id in a 1% sample of main ping data.
This dataset simplifies the longitudinal table by replacing 
the longitudinal arrays with summary statistics. 
This is the most useful dataset for describing our user base.</p>
<h4 id="content"><a name="content" class="plugin-anchor" href="#content"><i class="fa fa-link" aria-hidden="true"></i></a>Content</h4>
<p>Each row in the <code>cross_sectional</code> dataset represents one <code>client_id</code>,
which is approximately a user.
Each column is a summary statistic describing the client_id.</p>
<p>For example, the longitudinal table has a row called <code>geo_country</code> 
which contains an array of country codes.
For the same <code>client_id</code> the <code>cross_sectional</code> table 
has columns called <code>geo_country_mode</code> and <code>geo_country_configs</code> 
containing single summary statistics for 
the modal country and the number of distinct countries in the array.</p>
<table>
<thead>
<tr>
<th><code>client_id</code></th>
<th style="text-align:center"><code>geo_country</code></th>
<th style="text-align:center"><code>geo_country_mode</code></th>
<th style="text-align:center"><code>geo_country_configs</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td style="text-align:center">array&lt;&quot;US&quot;&gt;</td>
<td style="text-align:center">&quot;US&quot;</td>
<td style="text-align:center">1</td>
</tr>
<tr>
<td>2</td>
<td style="text-align:center">array&lt;&quot;DE&quot;, &quot;DE&quot; &quot;US&quot;&gt;</td>
<td style="text-align:center">&quot;DE&quot;</td>
<td style="text-align:center">2</td>
</tr>
</tbody>
</table>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<p>This table is much easier to work with than the longitudinal dataset because
you don&apos;t need to work with arrays.
This table has a limited number of pre-computed summary statistics
so you&apos;re metric may not be included.</p>
<p>Note that this dataset is a summary of the longitudinal dataset,
so it is also a 1% sample of all client_ids.</p>
<p>All summary statistics are computed over the last 180 days,
so this dataset can be insensitive to changes over time.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The cross_sectional dataset is available in re:dash.
Here&apos;s an <a href="https://sql.telemetry.mozilla.org/queries/4202/source" target="_blank">example query</a>.</p>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data in Spark.</p>
<pre><code>s3://telemetry-parquet/cross_sectional/v1/
</code></pre><h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>The <code>cross_sectional</code> dataset is generated by 
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/CrossSectionalView.scala" target="_blank">this code</a>.
Take a look at <a href="https://sql.telemetry.mozilla.org/queries/4203/source" target="_blank">this query</a> for a schema.</p>
<h2 id="clientcount"><a name="clientcount" class="plugin-anchor" href="#clientcount"><i class="fa fa-link" aria-hidden="true"></i></a>client_count</h2>
<p>The <code>client_count</code> dataset is useful for estimating user counts over a few 
<a href="https://github.com/mozilla/telemetry-airflow/blob/master/jobs/client_count_view.sh" target="_blank">pre-defined dimensions</a>.</p>
<h4 id="content"><a name="content" class="plugin-anchor" href="#content"><i class="fa fa-link" aria-hidden="true"></i></a>Content</h4>
<p>This dataset includes columns for a dozen factors and an HLL variable.
The <code>hll</code> column contains a
<a href="https://en.wikipedia.org/wiki/HyperLogLog" target="_blank">HyperLogLog</a>
variable, which is an approximation to the exact count.
The factor columns include activity date and the dimensions listed
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/ClientCountView.scala#L22" target="_blank">here</a>.
Each row represents one combinations of the factor columns.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<p>It&apos;s important to understand that the <code>hll</code> column is <strong>not a standard count</strong>.
The <code>hll</code> variable avoids double-counting users when aggregating over multiple days.
The HyperLogLog variable is a far more efficient way to count distinct elements of a set,
but comes with some complexity.
To find the cardinality of an HLL use <code>cardinality(cast(hll AS HLL))</code>.
To find the union of two HLL&apos;s over different dates, use <code>merge(cast(hll AS HLL))</code>.
The <a href="https://sql.telemetry.mozilla.org/queries/81/source#129" target="_blank">Firefox ER Reporting Query</a>
is a good example to review.
Finally, Roberto has a relevant writeup
<a href="https://robertovitillo.com/2016/04/12/measuring-product-engagment-at-scale/" target="_blank">here</a>.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is available in re:dash.
Take a look at this 
<a href="https://sql.telemetry.mozilla.org/queries/81/source#129" target="_blank">example query</a>.</p>
<p>I don&apos;t recommend accessing this data from ATMO.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<h2 id="heavyusers"><a name="heavyusers" class="plugin-anchor" href="#heavyusers"><i class="fa fa-link" aria-hidden="true"></i></a>heavy_users</h2>
<p>The <code>heavy_users</code> table provides information about whether a given client_id is
considered a &quot;heavy user&quot; on each day (using submission date).</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>The <code>heavy_users</code> table contains one row per client-day, where day is
<code>submission_date</code>. A client has a row for a specific <code>submission_date</code> if
they were active at all in the 28 day window ending on that <code>submission_date</code>.</p>
<p>A user is a &quot;heavy user&quot; as of day N if, for the 28 day period ending
on day N, the sum of their active_ticks is in the 90th percentile (or
above) of all clients during that period. For more analysis on this,
and a discussion of new profiles, see
<a href="https://metrics.mozilla.com/protected/sguha/heavy/heavycutoffs5.html" target="_blank">this link</a>.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<ol>
<li>Data starts at 20170801. There is technically data in the table before
this, but the <code>heavy_user</code> column is <code>NULL</code> for those dates because it
needed to bootstrap the first 28 day window.</li>
<li>Because it is top the 10% of clients for each 28 day period, more
than 10% of clients active on a given <code>submission_date</code> will be
considered heavy users. If you join with another data source
(<code>main_summary</code>, for example), you may see a larger proportion of heavy
users than expected.</li>
<li>Each day has a separate, but related, set of heavy users. Initial
investigations show that approximately 97.5% of heavy users as of a
certain day are still considered heavy users as of the next day.</li>
<li>There is no &quot;fixing&quot; or weighting of new profiles - days before the
profile was created are counted as zero <code>active_ticks</code>. Analyses may
need to use the included <code>profile_creation_date</code> field to take this
into account.</li>
</ol>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is available both via sql.t.m.o and Spark.</p>
<p>In Spark:</p>
<pre><code class="lang-python">spark.read.parquet(<span class="hljs-string">&quot;s3://telemetry-parquet/heavy_users/v1&quot;</span>)
</code></pre>
<p>In SQL:</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> heavy_users <span class="hljs-keyword">LIMIT</span> <span class="hljs-number">3</span>
</code></pre>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>The code responsible for generating this dataset is
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/HeavyUsersView.scala" target="_blank">here</a></p>
<h2 id="churn"><a name="churn" class="plugin-anchor" href="#churn"><i class="fa fa-link" aria-hidden="true"></i></a>churn</h2>
<p>The churn dataset tracks the 7-day churn rate of telemetry profiles. This
dataset is generally used for analyzing cohort churn across segments and time.</p>
<h4 id="content"><a name="content" class="plugin-anchor" href="#content"><i class="fa fa-link" aria-hidden="true"></i></a>Content</h4>
<p>Churn is the rate of attrition defined by <code>(clients seen in week N)/(clients seen in week 0)</code>
for groups of clients with some shared attributes. A group of clients with
shared attributes is called a <em>cohort</em>. The cohorts in this dataset are created
every week and can be tracked over time using the <code>acquisition_date</code> and the
weeks since acquisition or <code>current_week</code>.</p>
<p>The following example demonstrates the current logic for generating this
dataset. Each column represents the days since some arbitrary starting date.</p>
<table>
<thead>
<tr>
<th>client</th>
<th>00</th>
<th>01</th>
<th>02</th>
<th>03</th>
<th>04</th>
<th>05</th>
<th>06</th>
<th>07</th>
<th>08</th>
<th>09</th>
<th>10</th>
<th>11</th>
<th>12</th>
<th>13</th>
<th>14</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>B</td>
<td></td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>X</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<p>All three clients are part of the same cohort. Client A is retained for weeks 0
and 1 since there is activity in both periods. A client only needs to show up
once in the period to be counted as retained. Client B is acquired in week 0 and
is active frequently but does not appear in following weeks. Client B is
considered churned on week 1. However, a client that is churned can become
retained again. Client C is considered churned on week 1 but retained on week 3.</p>
<p>The following table summarizes the above daily activity into the following view
where every column represents the current week since acquisition date..</p>
<table>
<thead>
<tr>
<th>client</th>
<th>0</th>
<th>1</th>
<th>2</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>X</td>
<td>X</td>
<td></td>
</tr>
<tr>
<td>B</td>
<td>X</td>
<td></td>
<td></td>
</tr>
<tr>
<td>C</td>
<td>X</td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<p>The clients are then grouped into cohorts by attributes. An attribute describes
a property about the cohort such as the country of origin or the binary
distribution channel. Each group also contains descriptive aggregates of
engagement. Each metric describes the activity of a cohort such as size and
overall usage at a given time instance.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<ul>
<li>Each row in this dataset describes a unique segment of users<ul>
<li>The number of rows is exponential with the number of dimensions</li>
<li>New fields should be added sparing to account for data-set size</li>
</ul>
</li>
<li>The dataset lags by 10 days in order account for submission latency<ul>
<li>This value was determined to be time for 99% of main pings to arrive at the
server. With the shutdown-ping sender, this has been reduced to 4 days.
However, <code>churn_v3</code> still tracks releases older than Firefox 55.</li>
</ul>
</li>
<li>The start of the period is fixed to Sundays. Once it has been aggregated, the
period cannot be shifted due to the way clients are counted.<ul>
<li>A supplementary 1-day <code>retention</code> dataset using HyperLogLog for client
counts is available for counting over arbitrary retention periods and date
offsets. Additionally, calculating churn or retention over specific cohorts
is tractable in STMO with <code>main_summary</code> or <code>clients_daily</code> datasets.</li>
</ul>
</li>
</ul>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p><code>churn</code> is available in Redash under Athena and Presto. The data is also
available in parquet for consumption by columnar data engines at
<code>s3://telemetry-parquet/churn/v3</code>.</p>
<h2 id="retention"><a name="retention" class="plugin-anchor" href="#retention"><i class="fa fa-link" aria-hidden="true"></i></a>retention</h2>
<p>The <code>retention</code> table provides client counts relevant to client retention at a
1-day granularity. The project is tracked in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1381840" target="_blank">Bug 1381840</a></p>
<h3 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h3>
<p>The <code>retention</code> table contains a set of attribute columns used to specify a
cohort of users and a set of metric columns to describe cohort activity. Each
row contains a permutation of attributes, an approximate set of clients in a
cohort, and the aggregate engagement metrics.</p>
<p>This table uses the HyperLogLog (HLL) sketch to create an approximate set of
clients in a cohort. HLL allows counting across overlapping cohorts in a single
pass while avoiding the problem of double counting. This data-structure has the
benefit of being compact and performant in the context of retention analysis,
at the expense of precision. For example, calculating a 7-day retention period
can be obtained by aggregating over a week of retention data using the union
operation. With SQL primitive, this requires a recomputation of COUNT DISTINCT
over <code>client_id</code>&apos;s in the 7-day window.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<ol>
<li>The data starts at 2017-03-06, the <a href="https://wiki.mozilla.org/RapidRelease/Calendar" target="_blank">merge date where Nightly started to
track Firefox 55 in Mozilla-Central</a>. However, there was
not a consistent view into the behavior of first session profiles until the
<a href="../new_profile/reference.md"><code>new_profile</code> ping</a>. This means much of the data is inaccurate
before 2017-06-26.</li>
<li>This dataset uses 4-day reporting latency to aggregate at least 99% of the
data in a given submission date. This figure is derived from the
<a href="https://sql.telemetry.mozilla.org/dashboard/telemetry-health" target="_blank">telemetry-health measurements on submission latency</a>, with
the discussion in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1407410" target="_blank">Bug 1407410</a>. This latency metric was reduced
Firefox 55 with the introduction of the shutdown ping-sender mechanism.</li>
<li>Caution should be taken before adding new columns. Additional attribute
columns will grow the number of rows exponentially.</li>
<li>The number of HLL bits chosen for this dataset is 13. This means the default
size of the HLL object is 2^13 bits or 1KiB. This maintains about a 1% error
on average. See <a href="https://github.com/twitter/algebird/blob/develop/algebird-core/src/main/scala/com/twitter/algebird/HyperLogLog.scala#L230-L255" target="_blank">this table from Algebird&apos;s HLL implementation</a> for
more details.</li>
</ol>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is primarily available through <a href="sql.telemetry.mozilla.org">Redash on STMO</a> via
the Presto source. This service has been configured to use predefined HLL
functions.</p>
<p>The column should first be cast to the HLL type. The scalar
<code>cardinality(&lt;hll_column&gt;)</code> function will approximate the number of unique
items per HLL object. The aggregate <code>merge(&lt;hll_column&gt;)</code> function will perform
the set union between all objects in a column.</p>
<p>Example: Cast the count column into the appropriate type.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">cast</span>(hll <span class="hljs-keyword">as</span> HLL) <span class="hljs-keyword">as</span> n_profiles_hll <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">retention</span>
</code></pre>
<p>Count the number of clients seen over all attribute combinations.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> cardinality(<span class="hljs-keyword">cast</span>(hll <span class="hljs-keyword">as</span> HLL)) <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">retention</span>
</code></pre>
<p>Group-by and aggregate client counts over different release channels.</p>
<pre><code class="lang-sql"><span class="hljs-keyword">SELECT</span> channel, cardinality(<span class="hljs-keyword">merge</span>(<span class="hljs-keyword">cast</span>(hll <span class="hljs-keyword">AS</span> HLL))
<span class="hljs-keyword">FROM</span> <span class="hljs-keyword">retention</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> channel
</code></pre>
<p>The HyperLogLog library wrappers are available for use outside of the
configured STMO environment, <a href="https://github.com/mozilla/spark-hyperloglog" target="_blank"><code>spark-hyperloglog</code></a> and
<a href="https://github.com/vitillo/presto-hyperloglog" target="_blank"><code>presto-hyperloglog</code></a>.</p>
<p>Also see the <a href="../client_count/reference.md"><code>client_count</code> dataset</a>.</p>
<h2 id="clientsdaily"><a name="clientsdaily" class="plugin-anchor" href="#clientsdaily"><i class="fa fa-link" aria-hidden="true"></i></a>clients_daily</h2>
<p>The <code>clients_daily</code> table is intended as the first stop for asking questions
about how people use Firefox. It should be easy to answer simple questions.
Each row in the table is a (<code>client_id</code>, <code>activity_date</code>) and contains a
number of aggregates about that day&apos;s activity.</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>Many questions about Firefox take the form &quot;What did clients with
characteristics X, Y, and Z do during the period S to E?&quot; The
<code>clients_daily</code> table is aimed at answer those questions.</p>
<h4 id="background-and-caveats"><a name="background-and-caveats" class="plugin-anchor" href="#background-and-caveats"><i class="fa fa-link" aria-hidden="true"></i></a>Background and Caveats</h4>
<p>The rows in the table are based on <strong>activity date</strong> rather than
<strong>submission date</strong>, so there is a somewhat higher
<a href="concepts/analysis_gotchas.html#delays">processing delay</a> than for
some other datasets. It is expected that the latest &quot;day&quot; available
in this table is more than one day ago.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is stored as a parquet table in S3 at the following address.</p>
<pre><code>s3://telemetry-parquet/clients_daily/v5/
</code></pre><p>The <code>clients_daily</code> table is accessible through re:dash using the <code>Athena</code>
data source. It is also available via the <code>Presto</code> data source, though
<code>Athena</code> should be preferred for performance and stability reasons.</p>
<p>Here&apos;s an <a href="https://sql.telemetry.mozilla.org/queries/23746#61771" target="_blank">example query</a>.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>The code responsible for generating this dataset is
<a href="https://github.com/mozilla/python_mozetl/tree/master/mozetl/clientsdaily" target="_blank">here</a>.</p>
<h1 id="crash-ping-derived-datasets"><a name="crash-ping-derived-datasets" class="plugin-anchor" href="#crash-ping-derived-datasets"><i class="fa fa-link" aria-hidden="true"></i></a>Crash Ping Derived Datasets</h1>
<p>The <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/crash-ping.html" target="_blank">crash ping</a>
is captured after the main Firefox process crashes or after a content process crashes,
whether or not the crash report is submitted to crash-stats.mozilla.org.
It includes non-identifying metadata about the crash.</p>
<p>This section describes the derived datasets we provide to make analyzing this data easier.</p>
<h2 id="crashaggregates"><a name="crashaggregates" class="plugin-anchor" href="#crashaggregates"><i class="fa fa-link" aria-hidden="true"></i></a>crash_aggregates</h2>
<p>The <code>crash_aggregates</code> dataset compiles crash statistics over various dimensions for each day.</p>
<h4 id="rows-and-columns"><a name="rows-and-columns" class="plugin-anchor" href="#rows-and-columns"><i class="fa fa-link" aria-hidden="true"></i></a>Rows and Columns</h4>
<p>There&apos;s one column for each of the stratifying dimensions and the crash statistics.
Each row is a distinct set of dimensions, along with their associated crash stats.
Example stratifying dimensions include channel and country,
example statistics include usage hours and plugin crashes.
See the <a href="https://github.com/mozilla/telemetry-batch-view/blob/master/docs/CrashAggregateView.md" target="_blank">complete documentation</a>
for all available dimensions
and statistics.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>This dataset is accessible via re:dash.</p>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data in Spark.</p>
<pre><code>s3://telemetry-parquet/crash_aggregates/v1/
</code></pre><h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>The technical documentation for this dataset can be found in the
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/docs/CrashAggregateView.md" target="_blank">telemetry-batch-view documentation</a></p>
<h2 id="crashsummary"><a name="crashsummary" class="plugin-anchor" href="#crashsummary"><i class="fa fa-link" aria-hidden="true"></i></a>crash_summary</h2>
<p>The <code>crash_summary</code> table is the most direct representation of a crash ping.</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>The <code>crash_summary</code> table contains one row for each crash ping.
Each column represents one field from the crash ping payload,
though only a subset of all crash ping fields are included.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data in Spark.</p>
<pre><code>s3://telemetry-parquet/crash_summary/v1/
</code></pre><p><code>crash_summary</code> is accessible through re:dash.
Here&apos;s an <a href="https://sql.telemetry.mozilla.org/queries/4793/source" target="_blank">example query</a>.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>The technical documentation for <code>crash_summary</code> is located in the
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/docs/CrashSummary.md" target="_blank">telemetry-batch-view documentation</a>.</p>
<p>The code responsible for generating this dataset is
<a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/CrashSummaryView.scala" target="_blank">here</a></p>
<h1 id="new-profile-derived-datasets"><a name="new-profile-derived-datasets" class="plugin-anchor" href="#new-profile-derived-datasets"><i class="fa fa-link" aria-hidden="true"></i></a>New-Profile Derived Datasets</h1>
<p>The <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/new-profile-ping.html" target="_blank">new-profile ping</a>
is sent from Firefox Desktop on the first session of a newly created profile and contains the initial
information about the user environment.</p>
<p>This data is available in the <strong>telemetry_new_profile_parquet</strong> dataset.</p>
<p>The <code>telemetry_new_profile_parquet</code> table is the most direct representation of a new-profile ping.</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>The table contains one row for each ping. Each column represents one field from the new-profile ping payload, though only a subset of all fields are included.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data in Spark.</p>
<pre><code>s3://net-mozaws-prod-us-west-2-pipeline-data/telemetry-new-profile-parquet/v1/
</code></pre><p>The <code>telemetry_new_profile_parquet</code> is accessible through re:dash.
Here&apos;s an <a href="https://sql.telemetry.mozilla.org/queries/5888#table" target="_blank">example query</a>.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>This dataset is generated automatically using direct to parquet. The configuration responsible for generating this dataset was introdueced in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1360256" target="_blank">bug 1360256</a>.</p>
<h1 id="update-derived-dataset"><a name="update-derived-dataset" class="plugin-anchor" href="#update-derived-dataset"><i class="fa fa-link" aria-hidden="true"></i></a>Update Derived Dataset</h1>
<p>The <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/data/update-ping.html" target="_blank">update ping</a>
is sent from Firefox Desktop when a browser update is ready to be applied and after it was correctly applied.
It contains the build information and the update blob information, in addition to some information about the
user environment.
The <code>telemetry_update_parquet</code> table is the most direct representation of an update ping.</p>
<h4 id="contents"><a name="contents" class="plugin-anchor" href="#contents"><i class="fa fa-link" aria-hidden="true"></i></a>Contents</h4>
<p>The table contains one row for each ping. Each column represents one field from the update ping payload, though only a subset of all fields are included.</p>
<h4 id="accessing-the-data"><a name="accessing-the-data" class="plugin-anchor" href="#accessing-the-data"><i class="fa fa-link" aria-hidden="true"></i></a>Accessing the Data</h4>
<p>The data is stored as a parquet table in S3 at the following address.
See <a href="../cookbooks/parquet.html">this cookbook</a> to get started working with the data in Spark.</p>
<pre><code>s3://net-mozaws-prod-us-west-2-pipeline-data/telemetry-update-parquet/v1/
</code></pre><p>The <code>telemetry_update_parquet</code> is accessible through re:dash.
Here&apos;s an <a href="https://sql.telemetry.mozilla.org/queries/31267#table" target="_blank">example query</a>.</p>
<h4 id="further-reading"><a name="further-reading" class="plugin-anchor" href="#further-reading"><i class="fa fa-link" aria-hidden="true"></i></a>Further Reading</h4>
<p>This dataset is generated automatically using direct to parquet. The configuration responsible for generating this dataset was introduced in <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1384861" target="_blank">bug 1384861</a>.</p>
<h1 id="appendix"><a name="appendix" class="plugin-anchor" href="#appendix"><i class="fa fa-link" aria-hidden="true"></i></a>Appendix</h1>
<h2 id="mobile-metrics"><a name="mobile-metrics" class="plugin-anchor" href="#mobile-metrics"><i class="fa fa-link" aria-hidden="true"></i></a>Mobile Metrics</h2>
<p>There are several tables owned by the mobile team documented
<a href="https://wiki.mozilla.org/Mobile/Metrics/Redash" target="_blank">here</a>:</p>
<ul>
<li>android_events</li>
<li>android_clients</li>
<li>android_addons</li>
<li>mobile_clients</li>
</ul>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="data_privacy.html" class="navigation navigation-prev " aria-label="Previous page: Data Privacy">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../tools/stmo.html" class="navigation navigation-next " aria-label="Next page: Intro to STMO">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Choosing a Dataset","level":"1.2.3","depth":2,"next":{"title":"Intro to STMO","level":"1.2.4","depth":2,"path":"tools/stmo.md","ref":"tools/stmo.md","articles":[]},"previous":{"title":"Data Privacy","level":"1.2.2","depth":2,"path":"concepts/data_privacy.md","ref":"concepts/data_privacy.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["toc","anchors","ga","mermaid-gb3"],"pluginsConfig":{"toc":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"mermaid-gb3":{},"ga":{"configuration":"auto","token":"UA-104326577-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"structure":{"langs":"LANGS.md","readme":"introduction.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"concepts/choosing_a_dataset.md","mtime":"2017-12-18T23:29:54.167Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-02-15T20:39:36.792Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

