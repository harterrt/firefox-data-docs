
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Sending a Custom Ping Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-anchors/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    


    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="hll_zeppelin.html" />
    
    
    <link rel="prev" href="create_a_dataset.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    About Firefox Data Documentation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../concepts/reporting_a_problem.html">
            
                <a href="../concepts/reporting_a_problem.html">
            
                    
                    Reporting a problem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="../concepts/terminology.html">
            
                <a href="../concepts/terminology.html">
            
                    
                    Terminology
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../concepts/getting_started.html">
            
                <a href="../concepts/getting_started.html">
            
                    
                    Getting Started with Data Analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../concepts/analysis_intro.html">
            
                <a href="../concepts/analysis_intro.html">
            
                    
                    Analysis Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../concepts/choosing_a_dataset.html">
            
                <a href="../concepts/choosing_a_dataset.html">
            
                    
                    Choosing a Dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../tools/stmo.html">
            
                <a href="../tools/stmo.html">
            
                    
                    Intro to STMO
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../concepts/analysis_gotchas.html">
            
                <a href="../concepts/analysis_gotchas.html">
            
                    
                    Common Analysis Gotchas
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="../concepts/sql_optimization.html">
            
                <a href="../concepts/sql_optimization.html">
            
                    
                    Optimizing Queries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.6" data-path="../concepts/review.html">
            
                <a href="../concepts/review.html">
            
                    
                    Getting Review
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.7" data-path="../datasets/new_data.html">
            
                <a href="../datasets/new_data.html">
            
                    
                    Collecting New Data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../tools/">
            
                <a href="../tools/">
            
                    
                    Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../tools/projects.html">
            
                <a href="../tools/projects.html">
            
                    
                    Project Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../concepts/pipeline/data_pipeline.html">
            
                <a href="../concepts/pipeline/data_pipeline.html">
            
                    
                    Overview of Mozilla's Data Pipeline
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.2.1" data-path="../concepts/pipeline/data_pipeline_detail.html">
            
                <a href="../concepts/pipeline/data_pipeline_detail.html">
            
                    
                    In-depth Data Pipeline Detail
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.2" data-path="../concepts/pipeline/http_edge_spec.html">
            
                <a href="../concepts/pipeline/http_edge_spec.html">
            
                    
                    HTTP Edge Server Specification
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2.3" data-path="../concepts/pipeline/event_pipeline.html">
            
                <a href="../concepts/pipeline/event_pipeline.html">
            
                    
                    Event Pipeline Detail
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../tools/interfaces.html">
            
                <a href="../tools/interfaces.html">
            
                    
                    Analysis Interfaces
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../tools/spark.html">
            
                <a href="../tools/spark.html">
            
                    
                    Custom analysis with Spark
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../concepts/sql_style.html">
            
                <a href="../concepts/sql_style.html">
            
                    
                    SQL Style Guide
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="./">
            
                <a href="./">
            
                    
                    Cookbooks
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../tools/alerts.html">
            
                <a href="../tools/alerts.html">
            
                    
                    Alerts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="parquet.html">
            
                <a href="parquet.html">
            
                    
                    Working with Parquet Data on ATMO Clusters
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="create_a_dataset.html">
            
                <a href="create_a_dataset.html">
            
                    
                    Creating a custom Re:dash dataset
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.4.4" data-path="new_ping.html">
            
                <a href="new_ping.html">
            
                    
                    Sending a Custom Ping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="hll_zeppelin.html">
            
                <a href="hll_zeppelin.html">
            
                    
                    Using HyperLogLog in Zeppelin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" >
            
                <span>
            
                    
                    Dataset Specific
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.6.1" data-path="longitudinal_examples.html">
            
                <a href="longitudinal_examples.html">
            
                    
                    Longitudinal Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6.2" data-path="crash_pings.html">
            
                <a href="crash_pings.html">
            
                    
                    Working with Crash Pings
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.7" >
            
                <span>
            
                    
                    Real-time
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1" data-path="realtime_analysis_plugin.html">
            
                <a href="realtime_analysis_plugin.html">
            
                    
                    Creating a Real-time Analysis Plugin
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2" data-path="view_pings_cep.html">
            
                <a href="view_pings_cep.html">
            
                    
                    Seeing Your Own Pings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.3" data-path="../tools/cep_matcher.html">
            
                <a href="../tools/cep_matcher.html">
            
                    
                    CEP Matcher
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.8" >
            
                <span>
            
                    
                    Metrics
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.8.1" data-path="active_dau.html">
            
                <a href="active_dau.html">
            
                    
                    Active DAU Definition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.8.2" data-path="retention.html">
            
                <a href="retention.html">
            
                    
                    Retention Analysis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../experiments/shield_intro.html">
            
                <a href="../experiments/shield_intro.html">
            
                    
                    Experimenting and Evidence (Shield Program)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../experiments/shield_intro.html">
            
                <a href="../experiments/shield_intro.html">
            
                    
                    Get Started With Shield
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../experiments/shield_help.html">
            
                <a href="../experiments/shield_help.html">
            
                    
                    Contact and Help
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../experiments/shield_design_process.html">
            
                <a href="../experiments/shield_design_process.html">
            
                    
                    Designs for Gathering Evidence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../experiments/shield_surveys.html">
            
                <a href="../experiments/shield_surveys.html">
            
                    
                    Attitudinal Research:  Heartbeat, Surveys, Panels Screenshots, and Tasks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../experiments/shield_deploy.html">
            
                <a href="../experiments/shield_deploy.html">
            
                    
                    Shield Deploy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" >
            
                <span>
            
                    
                    Technical Details
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.6.1" >
            
                <a target="_blank" href="https://mana.mozilla.org/wiki/display/strategyandinsights/Shield">
            
                    
                    Mana: Detailed Shield Internal Processes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6.2" data-path="../experiments/targeting.html">
            
                <a href="../experiments/targeting.html">
            
                    
                    Targeting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6.3" >
            
                <a target="_blank" href="https://github.com/mozilla/shield-studies-addon-utils/tree/master/docs">
            
                    
                    Shield Study (Addon) Engineering
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6.4" data-path="../datasets/shield.html">
            
                <a href="../datasets/shield.html">
            
                    
                    Telemetry: shield-study, shield-study-addon
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../datasets/reference.html">
            
                <a href="../datasets/reference.html">
            
                    
                    Dataset Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../datasets/pings.html">
            
                <a href="../datasets/pings.html">
            
                    
                    Pings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../datasets/derived.html">
            
                <a href="../datasets/derived.html">
            
                    
                    Derived Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.2.1" data-path="../datasets/batch_view/addons/reference.html">
            
                <a href="../datasets/batch_view/addons/reference.html">
            
                    
                    Addons
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.2" data-path="../datasets/mozetl/churn/reference.html">
            
                <a href="../datasets/mozetl/churn/reference.html">
            
                    
                    Churn
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.3" data-path="../datasets/batch_view/client_count_daily/reference.html">
            
                <a href="../datasets/batch_view/client_count_daily/reference.html">
            
                    
                    Client Count Daily
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.4" data-path="../datasets/batch_view/client_count/reference.html">
            
                <a href="../datasets/batch_view/client_count/reference.html">
            
                    
                    Client Count
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.5" data-path="../datasets/batch_view/clients_daily/reference.html">
            
                <a href="../datasets/batch_view/clients_daily/reference.html">
            
                    
                    Clients Daily
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.6" data-path="../datasets/batch_view/crash_aggregates/reference.html">
            
                <a href="../datasets/batch_view/crash_aggregates/reference.html">
            
                    
                    Crash Aggregate
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.7" data-path="../datasets/batch_view/crash_summary/reference.html">
            
                <a href="../datasets/batch_view/crash_summary/reference.html">
            
                    
                    Crash Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.8" data-path="../datasets/batch_view/cross_sectional/reference.html">
            
                <a href="../datasets/batch_view/cross_sectional/reference.html">
            
                    
                    Cross Sectional
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.9" data-path="../datasets/streaming/error_aggregates/reference.html">
            
                <a href="../datasets/streaming/error_aggregates/reference.html">
            
                    
                    Error Aggregates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.10" data-path="../datasets/batch_view/events/reference.html">
            
                <a href="../datasets/batch_view/events/reference.html">
            
                    
                    Events
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.11" data-path="../datasets/batch_view/first_shutdown_summary/reference.html">
            
                <a href="../datasets/batch_view/first_shutdown_summary/reference.html">
            
                    
                    First Shutdown Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.12" data-path="../datasets/batch_view/longitudinal/reference.html">
            
                <a href="../datasets/batch_view/longitudinal/reference.html">
            
                    
                    Longitudinal
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.13" data-path="../datasets/batch_view/main_summary/reference.html">
            
                <a href="../datasets/batch_view/main_summary/reference.html">
            
                    
                    Main Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.14" data-path="../datasets/batch_view/new_profile/reference.html">
            
                <a href="../datasets/batch_view/new_profile/reference.html">
            
                    
                    New Profile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.15" data-path="../datasets/batch_view/retention/reference.html">
            
                <a href="../datasets/batch_view/retention/reference.html">
            
                    
                    Retention
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.16" data-path="../datasets/other/socorro_crash/reference.html">
            
                <a href="../datasets/other/socorro_crash/reference.html">
            
                    
                    Socorro Crash Reports
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.17" data-path="../datasets/other/ssl/reference.html">
            
                <a href="../datasets/other/ssl/reference.html">
            
                    
                    SSL Ratios (public)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.18" data-path="../datasets/batch_view/sync_summary/reference.html">
            
                <a href="../datasets/batch_view/sync_summary/reference.html">
            
                    
                    Sync Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2.19" data-path="../datasets/batch_view/update/reference.html">
            
                <a href="../datasets/batch_view/update/reference.html">
            
                    
                    Update
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../tools/experiments.html">
            
                <a href="../tools/experiments.html">
            
                    
                    Experimental Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.3.1" data-path="../datasets/shield.html">
            
                <a href="../datasets/shield.html">
            
                    
                    Accessing Shield Study data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.4" data-path="../datasets/search.html">
            
                <a href="../datasets/search.html">
            
                    
                    Search Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.4.1" data-path="../datasets/mozetl/search_aggregates/reference.html">
            
                <a href="../datasets/mozetl/search_aggregates/reference.html">
            
                    
                    Search Aggregates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.4.2" data-path="../datasets/mozetl/search_clients_daily/reference.html">
            
                <a href="../datasets/mozetl/search_clients_daily/reference.html">
            
                    
                    Search Clients Daily
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.5" data-path="../datasets/other.html">
            
                <a href="../datasets/other.html">
            
                    
                    Other Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.5.1" data-path="../datasets/other/hgpush/reference.html">
            
                <a href="../datasets/other/hgpush/reference.html">
            
                    
                    hgpush
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.1.6" data-path="../datasets/obsolete.html">
            
                <a href="../datasets/obsolete.html">
            
                    
                    Obsolete Datasets
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.6.1" data-path="../datasets/obsolete/heavy_users/reference.html">
            
                <a href="../datasets/obsolete/heavy_users/reference.html">
            
                    
                    Heavy Users
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <span>
            
                    
                    About this Documentation
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="../meta/contributing.html">
            
                <a href="../meta/contributing.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.2" >
            
                <a target="_blank" href="https://bugzilla.mozilla.org/enter_bug.cgi?assigned_to=nobody%40mozilla.org&bug_file_loc=http%3A%2F%2F&bug_ignored=0&bug_severity=normal&bug_status=NEW&cf_fx_iteration=---&cf_fx_points=---&component=Documentation%20and%20Knowledge%20Repo%20%28RTMO%29&contenttypemethod=autodetect&contenttypeselection=text%2Fplain&defined_groups=1&flag_type-4=X&flag_type-607=X&flag_type-800=X&flag_type-803=X&flag_type-916=X&form_name=enter_bug&maketemplate=Remember%20values%20as%20bookmarkable%20template&op_sys=Linux&priority=--&product=Data%20Platform%20and%20Tools&rep_platform=x86_64&target_milestone=---&version=unspecified">
            
                    
                    Bug Template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.1.3" data-path="../meta/structure.html">
            
                <a href="../meta/structure.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Sending a Custom Ping</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="sending-a-custom-ping"><a name="sending-a-custom-ping" class="plugin-anchor" href="#sending-a-custom-ping"><i class="fa fa-link" aria-hidden="true"></i></a>Sending a Custom Ping</h1>
<p>Got some new data you want to send to us? How in the world do you send a new ping? Follow this guide
to find out.</p>
<h2 id="write-your-questions"><a name="write-your-questions" class="plugin-anchor" href="#write-your-questions"><i class="fa fa-link" aria-hidden="true"></i></a>Write Your Questions</h2>
<p>Do not try and implement new pings unless you know specifically what questions you&apos;re trying to
answer. General questions about &quot;How do users use our product?&quot; won&apos;t cut it - these need to be
specific, concrete asks that can be translated to data points. This will also make it easier down
the line as you start data review.</p>
<p>More detail on how to design and implement new pings for Firefox Desktop <a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/collection/custom-pings.html" target="_blank">can be found here</a>.</p>
<h2 id="choose-a-namespace-and-doctype"><a name="choose-a-namespace-and-doctype" class="plugin-anchor" href="#choose-a-namespace-and-doctype"><i class="fa fa-link" aria-hidden="true"></i></a>Choose a Namespace and DocType</h2>
<p>For new telemetry pings, the namespace is simply <code>telemetry</code>. For non-Telemetry
pings, choose a namespace that uniquely identifies the product that will be
generating the data.</p>
<p>The DocType is used to differentiate pings within a namespace. It can be as
simple as <code>event</code>, but should generally be descriptive of the data being
collected.</p>
<h2 id="create-a-schema"><a name="create-a-schema" class="plugin-anchor" href="#create-a-schema"><i class="fa fa-link" aria-hidden="true"></i></a>Create a Schema</h2>
<p>Use JSON Schema to start with. See the <a href="https://github.com/mozilla-services/mozilla-pipeline-schemas#adding-a-new-schema" target="_blank">&quot;Adding a new schema&quot; documentation</a> and examples schemas in the
<a href="https://github.com/mozilla-services/mozilla-pipeline-schemas/" target="_blank">Mozilla Pipeline Schemas repo</a>.
This schema is just used to validate the incoming data; any ping that doesn&apos;t match the schema
will be removed. Validate your JSON Schema using a
<a href="https://jsonschemalint.com/#/version/draft-04/markup/json" target="_blank">validation tool</a>.</p>
<p>We already have automatic deduplicating based on <code>docId</code>, which catches about 90% of duplicates and
removes them from the dataset.</p>
<h2 id="start-a-data-review"><a name="start-a-data-review" class="plugin-anchor" href="#start-a-data-review"><i class="fa fa-link" aria-hidden="true"></i></a>Start a Data Review</h2>
<p>Data review for new pings is more complicated than when adding new probes. See
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1347266" target="_blank">Data Review for Focus-Event Ping</a>
as an example. Consider where the data falls in the
<a href="https://wiki.mozilla.org/Firefox/Data_Collection" target="_blank">Data Collection Categories</a>.</p>
<h2 id="submit-schema-to-mozilla-servicesmozilla-pipeline-schemas"><a name="submit-schema-to-mozilla-servicesmozilla-pipeline-schemas" class="plugin-anchor" href="#submit-schema-to-mozilla-servicesmozilla-pipeline-schemas"><i class="fa fa-link" aria-hidden="true"></i></a>Submit Schema to <code>mozilla-services/mozilla-pipeline-schemas</code></h2>
<p>The first schema added should be the JSON Schema made in step 2.
Add at least one example ping which the data can be validated against.
These test pings will be validated automatically during the build.</p>
<p>Additionally,
a <a href="https://github.com/mozilla-services/mozilla-pipeline-schemas/blob/master/schemas/telemetry/core/core.9.parquetmr.txt" target="_blank">Parquet output</a>
schema should be added. This would add a new dataset, available in <a href="https://sql.telemetry.mozilla.org" target="_blank">Re:dash</a>.
The best documentation we have for the Parquet schema is by looking at the examples in
<a href="https://github.com/mozilla-services/mozilla-pipeline-schemas" target="_blank"><code>mozilla-pipeline-schemas</code></a>.</p>
<p>Parquet output also has a <code>metadata</code> section. These are fields added to the ping at ingestion time;
they might come from the URL submitted to the edge server, or the IP Address used to make the request.
<a href="https://pipeline-cep.prod.mozaws.net/dashboard_output/analysis.moz_telemetry_parquet_schema.parquet.txt" target="_blank">This document</a>
lists available metadata fields for all pings.</p>
<p>The stream you&apos;re interested in is probably <code>telemetry</code>.
For example, look at <code>system-addon-deployment-diagnostics</code> immediately under the <code>telemetry</code> top-level
field. The <code>schema</code> element has top-level fields (e.g. <code>Timestamp</code>, <code>Type</code>), as well as more fields
under the <code>Fields</code> element. Any of these can be used in the <code>metadata</code> section of your parquet schema,
except for <code>submission</code>.</p>
<p>Some common ones for Telemetry data might be:</p>
<ul>
<li><code>Date</code></li>
<li><code>submissionDate</code></li>
<li><code>geoCountry</code></li>
<li><code>geoCity</code></li>
<li><code>geoSubdivision1</code></li>
<li><code>geoSubdivision2</code></li>
<li><code>normalizedChannel</code></li>
<li><code>appVersion</code></li>
<li><code>appBuildId</code></li>
</ul>
<p>And for non-Telemetry data:</p>
<ul>
<li><code>geoCountry</code></li>
<li><code>geoCity</code></li>
<li><code>geoSubdivision1</code></li>
<li><code>geoSubdivision2</code></li>
<li><code>documentId</code></li>
</ul>
<p><em>Important Note</em>: Schema evolution of nested structs is currently broken, so you will not be able to add
any fields in the future to your <code>metadata</code> section. We recommend adding any that may seem useful.</p>
<h3 id="testing-the-schema"><a name="testing-the-schema" class="plugin-anchor" href="#testing-the-schema"><i class="fa fa-link" aria-hidden="true"></i></a>Testing The Schema</h3>
<p>For new data, use the <a href="https://github.com/mozilla-services/edge-validator" target="_blank">edge validator</a> to test
your schema.</p>
<p>If your data is <em>already</em> being sent, and you want to test the schema you&apos;re writing on the data
that is currently being ingested, you can test your Parquet output in
<a href="https://pipeline-cep.prod.mozaws.net/" target="_blank">Hindsight</a> by using an output plugin.
See <a href="https://bugzilla.mozilla.org/attachment.cgi?id=8829626" target="_blank">Core ping output plugin</a>
for an example, where the parquet schema is specified as <code>parquet_schema</code>. If no errors arise, that
means it should be correct. The &quot;Deploy&quot; button should not be used to actually deploy, that will be
done by operations in the next step.</p>
<h2 id="telemetry-specific-deploy-the-plugin"><a name="telemetry-specific-deploy-the-plugin" class="plugin-anchor" href="#telemetry-specific-deploy-the-plugin"><i class="fa fa-link" aria-hidden="true"></i></a>(Telemetry-specific) Deploy the Plugin</h2>
<p>File <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1333203" target="_blank">a bug to deploy the new schema.</a></p>
<p>Real-time analysis will be key to ensuring your data is being processed and parsed correctly.
It should follow the format specified in
<a href="https://mozilla-services.github.io/lua_sandbox_extensions/moz_telemetry/sandboxes/heka/analysis/moz_telemetry_doctype_monitor.html" target="_blank">MozTelemetry <code>docType</code> monitor</a>.
This allows you to check validation errors, size changes, duplicates, and more. Once you have
the numbers set, file a
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1356380" target="_blank">bug to let ops deploy it</a>.</p>
<h2 id="start-sending-data"><a name="start-sending-data" class="plugin-anchor" href="#start-sending-data"><i class="fa fa-link" aria-hidden="true"></i></a>Start Sending Data</h2>
<p>If you&apos;re using the Telemetry APIs, use those built-in. These can be with the
<a href="https://firefox-source-docs.mozilla.org/toolkit/components/telemetry/telemetry/collection/custom-pings.html" target="_blank">Gecko Telemetry APIs</a>,
the <a href="https://github.com/mozilla-mobile/telemetry-android" target="_blank">Android Telemetry APIs</a>, or the
<a href="https://github.com/mozilla-mobile/telemetry-ios" target="_blank">iOS Telemetry APIs</a>.</p>
<p>For non-Telemetry data, see <a href="../concepts/pipeline/http_edge_spec.html">our HTTP edge server specification</a>
and specifically the <a href="../concepts/pipeline/http_edge_spec.html#postput-request">non-Telemetry example</a> for the expected format. The edge
server endpoint is <code>https://incoming.telemetry.mozilla.org</code>.</p>
<h2 id="non-telemetry-access-your-data"><a name="non-telemetry-access-your-data" class="plugin-anchor" href="#non-telemetry-access-your-data"><i class="fa fa-link" aria-hidden="true"></i></a>(Non-Telemetry) Access Your Data</h2>
<p>First confirm with the reviewers of
<a href="#submit-schema-to-mozilla-servicesmozilla-pipeline-schemas">your schema pull request</a>
that your schemas have been deployed.</p>
<p>In the following links, replace <code>&lt;namespace&gt;</code>, <code>&lt;doctype&gt;</code> And <code>&lt;docversion&gt;</code> with
appropriate values. Also replace <code>-</code> with <code>_</code> in <code>&lt;namespace&gt;</code> if your
namespace contains <code>-</code> characters.</p>
<h3 id="cep"><a name="cep" class="plugin-anchor" href="#cep"><i class="fa fa-link" aria-hidden="true"></i></a>CEP</h3>
<p>Once you&apos;ve sent some pings, refer to the following real-time analysis plugins
to verify that your data is being processed:</p>
<ul>
<li><code>https://pipeline-cep.prod.mozaws.net/dashboard_output/graphs/analysis.moz_generic_error_monitor.&lt;namespace&gt;.html</code></li>
<li><code>https://pipeline-cep.prod.mozaws.net/dashboard_output/analysis.moz_generic_&lt;namespace&gt;_&lt;doctype&gt;_&lt;docversion&gt;.submissions.json</code></li>
<li><code>https://pipeline-cep.prod.mozaws.net/dashboard_output/analysis.moz_generic_&lt;namespace&gt;_&lt;doctype&gt;_&lt;docversion&gt;.errors.txt</code></li>
</ul>
<p>If this first graph shows ingestion errors, you can view the corresponding
error messages in the third link. Otherwise, you should be able to view the
last ten processed submissions via the second link. You can also write your own
custom real-time analysis plugins using this same infrastructure if you desire;
use the above plugins as examples and see
<a href="realtime_analysis_plugin.html">here</a> for a more detailed explanation.</p>
<p>If you encounter schema validation errors, you can fix your data or
<a href="#submit-schema-to-mozilla-servicesmozilla-pipeline-schemas">submit another pull request</a>
to amend your schemas. Backwards-incompatible schema changes should generally
be accompanied by an increment to <code>docversion</code>.</p>
<p>Once you&apos;ve established that your pings are flowing through the real-time
system, verify that you can access the data from the downstream systems.</p>
<h3 id="stmo"><a name="stmo" class="plugin-anchor" href="#stmo"><i class="fa fa-link" aria-hidden="true"></i></a>STMO</h3>
<p>In the Athena data source, a new table
<code>&lt;namespace&gt;_&lt;doctype&gt;_parquet_&lt;docversion&gt;</code> will be created for your data. A
convenience pointer <code>&lt;namespace&gt;_&lt;doctype&gt;_parquet</code> will also refer to the latest
available <code>docversion</code> of the ping. The data is partitioned by
<code>submission_date_s3</code> which is formatted as <code>%Y%m%d</code>, like <code>20180130</code>, and is
generally updated hourly. Refer to the <a href="../tools/stmo.html">STMO documentation</a>
for general information about using Re:dash.</p>
<p>This table may take up to a day to appear in the Athena source; if you still
don&apos;t see a table for your new ping after 24 hours,
<a href="https://mana.mozilla.org/wiki/display/SVCOPS/Contacting+Data+Operations" target="_blank">contact Data Operations</a>
so that they can investigate. Once the table is available, it should contain
all the pings sent during that first day, regardless of how long it takes for
the table to appear.</p>
<h3 id="atmo"><a name="atmo" class="plugin-anchor" href="#atmo"><i class="fa fa-link" aria-hidden="true"></i></a>ATMO</h3>
<p>The data should be available in S3 at:</p>
<p><code>s3://net-mozaws-prod-us-west-2-pipeline-data/&lt;namespace&gt;-&lt;doctype&gt;-parquet/v&lt;docversion&gt;/</code></p>
<p>Note: here <code>&lt;namespace&gt;</code> should not be escaped.</p>
<p>Refer to the <a href="../tools/spark.html#faq">Spark FAQ</a> for details on accessing this table via ATMO.</p>
<h2 id="write-etl-jobs"><a name="write-etl-jobs" class="plugin-anchor" href="#write-etl-jobs"><i class="fa fa-link" aria-hidden="true"></i></a>Write ETL Jobs</h2>
<p>We have some basic generalized ETL jobs you can use to transform your data on a batch basis - for example,
a <a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/GenericLongitudinal.scala" target="_blank">Longitudinal</a>
or <a href="https://github.com/mozilla/telemetry-batch-view/blob/master/src/main/scala/com/mozilla/telemetry/views/GenericCountView.scala" target="_blank">client-count-daily</a>
like dataset. Otherwise, you&apos;ll have to write your own.</p>
<p>You can schedule it on <a href="http://workflow.telemetry.mozilla.org/" target="_blank">Airflow</a>, or you can
run it as a job in ATMO. If the output is parquet, you can add it to the Hive metastore to have it
available in re:dash. Check the docs on <a href="create_a_dataset.html">creating your own datasets</a>.</p>
<h2 id="build-dashboards-using-atmo-or-stmo"><a name="build-dashboards-using-atmo-or-stmo" class="plugin-anchor" href="#build-dashboards-using-atmo-or-stmo"><i class="fa fa-link" aria-hidden="true"></i></a>Build Dashboards Using ATMO or STMO</h2>
<p>Last steps! What are you using this data for anyway?</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="create_a_dataset.html" class="navigation navigation-prev " aria-label="Previous page: Creating a custom Re:dash dataset">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="hll_zeppelin.html" class="navigation navigation-next " aria-label="Next page: Using HyperLogLog in Zeppelin">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Sending a Custom Ping","level":"1.4.4","depth":2,"next":{"title":"Using HyperLogLog in Zeppelin","level":"1.4.5","depth":2,"path":"cookbooks/hll_zeppelin.md","ref":"cookbooks/hll_zeppelin.md","articles":[]},"previous":{"title":"Creating a custom Re:dash dataset","level":"1.4.3","depth":2,"path":"cookbooks/create_a_dataset.md","ref":"cookbooks/create_a_dataset.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["toc","anchors","ga","mermaid-gb3","-fontsettings"],"pluginsConfig":{"toc":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"highlight":{},"mermaid-gb3":{},"ga":{"configuration":"auto","token":"UA-104326577-1"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchors":{}},"structure":{"langs":"LANGS.md","readme":"introduction.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"cookbooks/new_ping.md","mtime":"2018-09-06T20:36:30.579Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-09-06T21:24:16.357Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-mermaid-gb3/book/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    <script src="../gitbook/gitbook-plugin-mermaid-gb3/mermaid/mermaid.min.js"></script>

    </body>
</html>

